{% extends "reels/base.html" %}
{% load static %}

{% block title %}Create{% endblock %}

{% block head %}
<link rel="stylesheet" href="{% static 'reels/create.css' %}">
{% endblock %}

{% block content %}
<div class="container step-container">
    <h1 class="m-4">Create a Reel</h1>
    <p class="m-4">
        Welcome to Reels. Upload videos to stitch together, like clips from a video game or other short videos.
    </p>
</div>
<div id="upload-container" class="container step-container">
    <h3 class="m-4">Step 1: Upload</h3>
    <div id="video-bar" class="simple-row">
        <div class="col-2">
            <div id="upload-video" class="simple-row">
                <form action="/create" class="upload" id="upload_video_form" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <input type="file" id="video_file_button" name="file" accept="video/mp4" multiple>
                </form>
                <button onclick="uploadVideo();">
                        Upload Video
                </button>
            </div>
        </div>
        <div class="col-10">
            <div id="uploads" style="display: flex; flex-wrap: wrap; justify-content: center">
                <div class="col">
                    {% for uploaded_clip in uploaded_clips %}
                    <div class="uploaded">
                        <video controls>
                            <source src="{{ uploaded_clip }}" type="video/mp4">
                                Your browser does not support the video tag.
                        </video>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    <h4 class="m-4">(Optional) Upload Music</h4>
    <div id="music-bar" class="simple-row">
        <div class="col-2">
            <div id="upload-music" class="simple-row">
                <form action="/create" class="upload" id="upload_music_form" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <input type="file" id="music_file_button" name="file" accept="audio/mp3" multiple>
                </form>
                <button onclick="uploadMusic();">
                        Upload Music
                </button>
            </div>
        </div>
        <div class="col-10 m-auto">
            No Music Selected
        </div>
    </div>
</div>
<div id="preset-container" class="container step-container">
    <br>
    <h3 class="m-4">Step 2: Choose a Preset</h3>
    <form id="preset-form" action="/create" method="POST">
        {% csrf_token %}
        <!-- THESE RADIO BUTTONS ARE CREATED IN JAVASCRIPT FROM BUTTONS IN preset-grid, see create.js -->
    </form>
    <div id="preset-grid" style="width: 50%">
        <div class="row">
            <!-- Eventually going to make these dynamically loaded with django context or javascript -->
            <div class="col-12 col-sm-12 col-md-6 col-lg-4">
            <button id="basic_button" name="basic_button" value="basic" onClick="presetClick('basic');">Basic</button>
            </div>
            <div class="col-12 col-sm-12 col-md-6 col-lg-4">
            <button id="cod_sniper_button" name="cod_sniper_button" value="cod_sniper" onClick="presetClick('cod_sniper')">Call of Duty (Sniper)</button>
            </div>
            <div class="col-12 col-sm-12 col-md-6 col-lg-4">
            <button id="rocket_league_button" name="rocket_league_button" value="rocket_league" onClick="presetClick('rocket_league');">Rocket League</button>
            </div>
        </div>
    </div>
</div>
<div id="submit-container" class="container step-container">
    <br>
    <h3 class="m-4">Step 3: Make your Reel!</h3>
    <button name="make_button" value="make" onclick="document.getElementById('preset-form').submit();">Go!</button>
</div>
{% endblock %}

{% block tail %}
<script src="{% static 'reels/create.js' %}"></script>
{% endblock %}
